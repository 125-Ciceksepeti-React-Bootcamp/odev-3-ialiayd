(this["webpackJsonp125-ciceksepeti-hw-3"]=this["webpackJsonp125-ciceksepeti-hw-3"]||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(12),s=n.n(r),i=n(7),o=n(8),l=n(14),d=n(13),u=(n(19),n(20),n.p+"static/media/logo.237a57f3.svg"),j=n(0);var b=function(){return Object(j.jsx)("nav",{className:"navigation",children:Object(j.jsxs)("div",{className:"navigation__container",children:[Object(j.jsx)("div",{className:"navigation__logo-box",children:Object(j.jsx)("a",{href:"/",children:Object(j.jsx)("img",{src:u,alt:"",className:"navigation__logo"})})}),Object(j.jsxs)("ul",{className:"navigation__list",children:[Object(j.jsx)("li",{className:"navigation__list-item",children:Object(j.jsx)("a",{href:"/",className:"navigation__link",children:"Profile"})}),Object(j.jsx)("li",{className:"navigation__list-item",children:Object(j.jsx)("a",{href:"/",className:"navigation__link",children:"Logout"})})]})]})})};n(22);var m=function(){return Object(j.jsxs)("header",{className:"header",children:[Object(j.jsx)("div",{className:"header__title",children:Object(j.jsx)("h1",{className:"header__heading",children:"Wanna Rate Some? Let's Start!"})}),Object(j.jsx)("div",{className:"header__search",children:Object(j.jsxs)("form",{className:"header__form",children:[Object(j.jsx)("input",{placeholder:"Search businesses",type:"text",className:"header__form--input"}),Object(j.jsx)("button",{className:"header__form--btn",children:"Search"})]})})]})},h=n(10),O=n(4),v=n(3),f=n.n(v),x=n(5),_=n(2),p=function(){function e(t){Object(i.a)(this,e),this._enpoint="https://6157ff895167ba00174bb9ed.mockapi.io/hw3/Restaurants"}return Object(o.a)(e,[{key:"getReviews",value:function(){var e=Object(x.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this._enpoint);case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"deleteReview",value:function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._enpoint,"/").concat(t),{method:"DELETE"});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editReview",value:function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._enpoint,"/").concat(t.id),{method:"PUT",body:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),g=p,N=(n(24),n.p+"static/media/star.b4f51d4e.svg");var w=function(e){var t=e.cName,n=e.starIndex,a=e.setNewRating;return Object(j.jsx)("svg",{className:"restaurant__card-star ".concat(t),onMouseOver:function(e){e.preventDefault(),a(n)},children:Object(j.jsx)("use",{xlinkHref:"".concat(N,"#star")})})};var k=function(e){var t=e.rating,n=e.mode,c=e.changeRating,r=Object(a.useState)(t),s=Object(_.a)(r,2),i=s[0],o=s[1],l=function(e){"edit"===n&&(o(e),c(i))};return Object(j.jsx)("div",{className:"restaurant__card-star-box",children:Object(h.a)(Array(5)).map((function(e,t){return t+1<=Math.trunc(i)?Object(j.jsx)(w,{starIndex:t+1,cName:"",setNewRating:l},t):Object(j.jsx)(w,{starIndex:t+1,cName:"restaurant__card-star--unrated",setNewRating:l},t)}))})};var y=function(e){var t=e.review,n=e.editReview,a=e.deleteReview,c=e.mode,r=(t.id,t.name),s=t.image_url,i=t.rating,o=t.text,l=t.key;return Object(j.jsxs)("div",{className:"restaurant__card restaurant__card--reviewed",children:[Object(j.jsx)("div",{className:"restaurant__card-img-box",children:Object(j.jsx)("img",{className:"restaurant__card__img",src:s,alt:r})}),Object(j.jsxs)("div",{className:"restaurant__card-review-box",children:[Object(j.jsx)("h3",{className:"restaurant__card-title",children:r}),Object(j.jsx)(k,{rating:i,mode:c},l),Object(j.jsx)("div",{className:"restaurant__card-review",children:Object(j.jsxs)("p",{children:["\u201c",o,"\u201d"]})}),Object(j.jsxs)("div",{className:"restaurant__card-action-box",children:[Object(j.jsx)("button",{onClick:function(){n(t)},className:"btn btn--edit",children:"Edit Review"}),Object(j.jsx)("button",{onClick:function(){a(t.id)},className:"btn btn--delete",children:"Delete Review"})]})]})]})},R=n.p+"static/media/loading.4c44a352.svg";function S(){return Object(j.jsx)("div",{className:"main__loading",children:Object(j.jsx)("img",{src:R,alt:"Loading"})})}n(25);function L(e){var t=e.data,n=e.pushReview,c=e.mode,r=e.closeModal,s=Object(a.useState)(Object(O.a)({},t)),i=Object(_.a)(s,2),o=i[0],l=i[1];Object(a.useEffect)((function(){document.querySelector(".container").classList.add(".modal-open")}),[]);return Object(j.jsxs)("div",{className:"modal show",children:[Object(j.jsx)("div",{className:"modal__bg",children:"\xa0"}),Object(j.jsxs)("div",{className:"modal__form-wrapper",children:[Object(j.jsx)("button",{onClick:function(){r()},className:"modal__close",children:"\xd7"}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(o)},className:"modal__form",children:[Object(j.jsx)("h3",{className:"modal__title",children:o.name}),Object(j.jsx)("div",{className:"modal__input-group",children:Object(j.jsx)(k,{rating:o.rating,mode:c,changeRating:function(e){l(Object(O.a)(Object(O.a)({},o),{},{rating:e}))}})}),Object(j.jsx)("div",{className:"modal__input-group",children:Object(j.jsx)("textarea",{value:o.text,onChange:function(e){var t=e.target.value;l(Object(O.a)(Object(O.a)({},o),{},{text:t}))},placeholder:"Your review",className:"modal__text",name:"txt",id:"",cols:"60",rows:"3"})}),Object(j.jsx)("button",{className:"btn btn--review",children:"Edit"})]})]})]})}var C=function(e){var t=e.message,n=e.closeModal;return Object(j.jsx)("div",{className:"modal",children:Object(j.jsxs)("div",{className:"modal__message-wrapper",children:[Object(j.jsx)("button",{onClick:function(){n()},className:"modal__close",children:"\xd7"}),Object(j.jsxs)("h3",{className:"modal__title",children:[t," !"]})]})})};var E=function(e){var t=Object(a.useState)(!0),n=Object(_.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!1),i=Object(_.a)(s,2),o=i[0],l=i[1],d=Object(a.useState)(!1),u=Object(_.a)(d,2),b=u[0],m=u[1],v=Object(a.useState)(""),p=Object(_.a)(v,2),N=p[0],w=p[1],k=Object(a.useState)([]),R=Object(_.a)(k,2),E=R[0],M=R[1],D=Object(a.useState)({}),F=Object(_.a)(D,2),I=F[0],T=F[1],q="edit",P="view",A=Object(a.useMemo)((function(){return new g}),[]),B=Object(a.useMemo)((function(){return E}),[E]);Object(a.useEffect)((function(){var e=function(){var e=Object(x.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,A.getReviews();case 4:t=e.sent,!E.length>0&&M(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:return e.prev=11,r(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();e()}),[E,A]);var J=function(e){T(Object(O.a)({},e)),l(!0)},Y=function(e){M(E.filter((function(t){return t.id!==e}))),A.deleteReview(e).then((function(e){e&&w("Deleted"),m(!0),document.querySelector("body").classList.add("modal-open"),H()})),H()},H=function(){setTimeout((function(){l(!1),m(!1),document.querySelector("body").classList.remove("modal-open")}),1e3)};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("main",{className:"main",children:Object(j.jsx)(j.Fragment,{children:c?Object(j.jsx)(S,{}):Object(j.jsxs)("section",{className:"main__reviewed",children:[Object(j.jsx)("h2",{className:"main__title",children:"Your Reviews"}),B.map((function(e){return Object(j.jsx)(y,{review:e,editReview:J,deleteReview:Y,mode:P},e.id)}))]})})}),o&&Object(j.jsx)(L,{data:I,pushReview:function(e){var t=E.findIndex((function(t){return t.id===e.id})),n=Object(h.a)(E);n.splice(t,1,e),M(n),A.editReview(e).then((function(e){console.log(e)})).catch((function(e){return console.log(e)})),l(!1),w("Edited"),m(!0),document.querySelector("body").classList.add("modal-open"),H()},closeModal:H,mode:q}),b&&Object(j.jsx)(C,{message:N,closeModal:H})]})};n(26);var M=function(){return Object(j.jsx)("footer",{className:"footer",children:Object(j.jsx)("div",{className:"footer__content",children:Object(j.jsxs)("p",{children:["\xc7i\xe7ek Sepeti React Bootcamp 3. \xd6dev \xc7al\u0131\u015fmas\u0131 olarak ",Object(j.jsx)("a",{href:"https://github.com/ialiayd",target:"_blank",rel:"noreferrer",children:"Ali Aydemir"})," taraf\u0131ndan yap\u0131lm\u0131\u015ft\u0131r."]})})})},D=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(b,{}),Object(j.jsx)(m,{}),Object(j.jsx)(E,{}),Object(j.jsx)(M,{})]})}}]),n}(c.a.Component),F=D,I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,28)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(F,{})}),document.getElementById("root")),I()}},[[27,1,2]]]);
//# sourceMappingURL=main.ea6783da.chunk.js.map