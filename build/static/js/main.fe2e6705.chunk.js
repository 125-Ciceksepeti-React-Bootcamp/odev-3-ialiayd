(this["webpackJsonp125-ciceksepeti-hw-3"]=this["webpackJsonp125-ciceksepeti-hw-3"]||[]).push([[0],{19:function(e,t,a){},20:function(e,t,a){},22:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(12),r=a.n(s),i=a(6),o=a(7),l=a(14),d=a(13),j=(a(19),a(20),a.p+"static/media/logo.237a57f3.svg"),u=a(0);var b=function(){return Object(u.jsx)("nav",{className:"navigation",children:Object(u.jsxs)("div",{className:"navigation__container",children:[Object(u.jsx)("div",{className:"navigation__logo-box",children:Object(u.jsx)("a",{href:"/",children:Object(u.jsx)("img",{src:j,alt:"",className:"navigation__logo"})})}),Object(u.jsxs)("ul",{className:"navigation__list",children:[Object(u.jsx)("li",{className:"navigation__list-item",children:Object(u.jsx)("a",{href:"/",className:"navigation__link",children:"Profile"})}),Object(u.jsx)("li",{className:"navigation__list-item",children:Object(u.jsx)("a",{href:"/",className:"navigation__link",children:"Logout"})})]})]})})};a(22);var m=function(){return Object(u.jsxs)("header",{className:"header",children:[Object(u.jsx)("div",{className:"header__title",children:Object(u.jsx)("h1",{className:"header__heading",children:"Wanna Rate Some? Let's Start!"})}),Object(u.jsx)("div",{className:"header__search",children:Object(u.jsxs)("form",{className:"header__form",children:[Object(u.jsx)("input",{placeholder:"Search businesses",type:"text",className:"header__form--input"}),Object(u.jsx)("button",{className:"header__form--btn",children:"Search"})]})})]})},h=a(9),O=a(3),f=a(2),v=a(4),x=a.n(v),_=a(10),p=function(){function e(t){Object(i.a)(this,e),this._enpoint="https://6157ff895167ba00174bb9ed.mockapi.io/hw3/Restaurants"}return Object(o.a)(e,[{key:"getReviews",value:function(){var e=Object(_.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this._enpoint);case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteReview",value:function(){var e=Object(_.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._enpoint,"/").concat(t),{method:"DELETE"});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editReview",value:function(){var e=Object(_.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._enpoint,"/").concat(t.id),{method:"PUT",body:t});case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),g=p,N=(a(24),a.p+"static/media/star.b4f51d4e.svg");var w=function(e){var t=e.cName,a=e.starIndex,n=e.setNewRating;return Object(u.jsx)("svg",{className:"restaurant__card-star ".concat(t),onMouseOver:function(e){e.preventDefault(),n(a)},children:Object(u.jsx)("use",{xlinkHref:"".concat(N,"#star")})})};var k=function(e){var t=e.rating,a=e.mode,c=e.changeRating,s=Object(n.useState)(t),r=Object(f.a)(s,2),i=r[0],o=r[1],l=function(e){"edit"===a&&(o(e),c(i))};return Object(u.jsx)("div",{className:"restaurant__card-star-box",children:Object(h.a)(Array(5)).map((function(e,t){return t+1<=Math.trunc(i)?Object(u.jsx)(w,{starIndex:t+1,cName:"",setNewRating:l},t):Object(u.jsx)(w,{starIndex:t+1,cName:"restaurant__card-star--unrated",setNewRating:l},t)}))})};var y=function(e){var t=e.review,a=e.editReview,n=e.deleteReview,c=e.mode,s=(t.id,t.name),r=t.image_url,i=t.rating,o=t.text,l=t.key;return Object(u.jsxs)("div",{className:"restaurant__card restaurant__card--reviewed",children:[Object(u.jsx)("div",{className:"restaurant__card-img-box",children:Object(u.jsx)("img",{className:"restaurant__card__img",src:r,alt:s})}),Object(u.jsxs)("div",{className:"restaurant__card-review-box",children:[Object(u.jsx)("h3",{className:"restaurant__card-title",children:s}),Object(u.jsx)(k,{rating:i,mode:c},l),Object(u.jsx)("div",{className:"restaurant__card-review",children:Object(u.jsxs)("p",{children:["\u201c",o,"\u201d"]})}),Object(u.jsxs)("div",{className:"restaurant__card-action-box",children:[Object(u.jsx)("button",{onClick:function(){a(t)},className:"btn btn--edit",children:"Edit Review"}),Object(u.jsx)("button",{onClick:function(){n(t.id)},className:"btn btn--delete",children:"Delete Review"})]})]})]})},R=a.p+"static/media/loading.4c44a352.svg";function S(){return Object(u.jsx)("div",{className:"main__loading",children:Object(u.jsx)("img",{src:R,alt:"Loading"})})}a(25);function L(e){var t=e.data,a=e.pushReview,c=e.mode,s=e.closeModal,r=Object(n.useState)(Object(O.a)({},t)),i=Object(f.a)(r,2),o=i[0],l=i[1];Object(n.useEffect)((function(){document.querySelector(".container").classList.add(".modal-open")}),[]);return Object(u.jsxs)("div",{className:"modal show",children:[Object(u.jsx)("div",{className:"modal__bg",children:"\xa0"}),Object(u.jsxs)("div",{className:"modal__form-wrapper",children:[Object(u.jsx)("button",{onClick:function(){s()},className:"modal__close",children:"\xd7"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(o)},className:"modal__form",children:[Object(u.jsx)("h3",{className:"modal__title",children:o.name}),Object(u.jsx)("div",{className:"modal__input-group",children:Object(u.jsx)(k,{rating:o.rating,mode:c,changeRating:function(e){l(Object(O.a)(Object(O.a)({},o),{},{rating:e}))}})}),Object(u.jsx)("div",{className:"modal__input-group",children:Object(u.jsx)("textarea",{value:o.text,onChange:function(e){var t=e.target.value;l(Object(O.a)(Object(O.a)({},o),{},{text:t}))},placeholder:"Your review",className:"modal__text",name:"txt",id:"",cols:"60",rows:"3"})}),Object(u.jsx)("button",{className:"btn btn--review",children:"Edit"})]})]})]})}var C=function(e){var t=e.message,a=e.closeModal;return Object(u.jsx)("div",{className:"modal",children:Object(u.jsxs)("div",{className:"modal__message-wrapper",children:[Object(u.jsx)("button",{onClick:function(){a()},className:"modal__close",children:"\xd7"}),Object(u.jsxs)("h3",{className:"modal__title",children:[t," !"]})]})})};var E=function(e){var t=Object(n.useState)(!0),a=Object(f.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)(!1),i=Object(f.a)(r,2),o=i[0],l=i[1],d=Object(n.useState)(!1),j=Object(f.a)(d,2),b=j[0],m=j[1],v=Object(n.useState)(""),x=Object(f.a)(v,2),_=x[0],p=x[1],N=Object(n.useState)([]),w=Object(f.a)(N,2),k=w[0],R=w[1],E=Object(n.useState)({}),M=Object(f.a)(E,2),D=M[0],F=M[1],I="edit",T="view",q=new g;Object(n.useEffect)((function(){P()}),[]);var P=function(){s(!0),q.getReviews().then((function(e){R(e),s(!1)}))},A=function(e){F(Object(O.a)({},e)),l(!0)},B=function(e){R(k.filter((function(t){return t.id!==e}))),q.deleteReview(e).then((function(e){e&&p("Deleted"),m(!0),document.querySelector("body").classList.add("modal-open"),J()})),J()},J=function(){setTimeout((function(){l(!1),m(!1),document.querySelector("body").classList.remove("modal-open")}),1e3)};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("main",{className:"main",children:Object(u.jsx)(u.Fragment,{children:c?Object(u.jsx)(S,{}):Object(u.jsxs)("section",{className:"main__reviewed",children:[Object(u.jsx)("h2",{className:"main__title",children:"Your Reviews"}),k.map((function(e){return Object(u.jsx)(y,{review:e,editReview:A,deleteReview:B,mode:T},e.id)}))]})})}),o&&Object(u.jsx)(L,{data:D,pushReview:function(e){var t=k.findIndex((function(t){return t.id===e.id})),a=Object(h.a)(k);a.splice(t,1,e),R(a),q.editReview(e).then((function(e){})).catch((function(e){return console.log(e)})),l(!1),p("Edited"),m(!0),document.querySelector("body").classList.add("modal-open"),J()},closeModal:J,mode:I}),b&&Object(u.jsx)(C,{message:_,closeModal:J})]})};a(26);var M=function(){return Object(u.jsx)("footer",{className:"footer",children:Object(u.jsx)("div",{className:"footer__content",children:Object(u.jsxs)("p",{children:["\xc7i\xe7ek Sepeti React Bootcamp 3. \xd6dev \xc7al\u0131\u015fmas\u0131 olarak ",Object(u.jsx)("a",{href:"https://github.com/ialiayd",target:"_blank",rel:"noreferrer",children:"Ali Aydemir"})," taraf\u0131ndan yap\u0131lm\u0131\u015ft\u0131r."]})})})},D=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)(b,{}),Object(u.jsx)(m,{}),Object(u.jsx)(E,{}),Object(u.jsx)(M,{})]})}}]),a}(c.a.Component),F=D,I=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,28)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};r.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(F,{})}),document.getElementById("root")),I()}},[[27,1,2]]]);
//# sourceMappingURL=main.fe2e6705.chunk.js.map